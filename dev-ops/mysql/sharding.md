## sharding 分库分表

### 分表分库的两种方式

> 垂直拆分

根据业务对表进行分组，分配到不同的库

* 例如将电商库，拆分成会员库，商品库和订单库
* 优点: 业务边界清晰，很好的配合微服务，专库专用
* 缺点: 无法解决热点数据负载过高的问题，无法对特定的表进行分流

> 水平拆分

数据分片，将数据根据特定的路由规则，分配到不同的库

* 例如订单表，根据user_id，用取模算法进行数据分片，分配到几个库中
* 优点: 可以解决热点数据问题
* 缺点: 扩容困难，如果增加库，如何进行数据重新分片？

### 分表分库业务实现方式

> 代理模式

使用proxy代理实现路由，在proxy层配置路由规则

* 例如mycat, sharding-proxy等
* 优点: 支持跨语言
* 缺点: 额外增加了网络通信开销

> jdbc直连模式

通过动态代理，在jdbc层面进行切面增强，实现路由

* 例如sharding-jdbc, tddl
* 优点: 开销小，性能较好，支持路由不同类型的库，例如mysql和oracle等
* 缺点: 只能支持特定的语言

